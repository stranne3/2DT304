<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" name="viewport" content="width=device-width">
    <title>Crowding in exercise tracks</title>
    <link type="text/css" href="css/styles.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  </head>
  <body>
    <div class="topnav">
      <a>Home</a>
      <a>Statistics</a>
      <a>Location</a>
    </div>
    <div class="sidenav" style="width:70px">
      <a href="/about" class="w3-bar-item w3-button"><i class="fa fa-info-circle fa-2x "></i></a>
      <a href="/charts" class="w3-bar-item w3-button"><i class="fa fa-bar-chart fa-2x"></i></a>
      <a href="/map" class="w3-bar-item w3-button"><i class="fa fa-location-arrow fa-2x"></i></a>
      <a href="#" class="w3-bar-item w3-button"><i class="fa fa-globe fa-2x"></i></a>
    </div>
    
    <header class="top_header">
      <div class="header_nav">
        <form action="/" method="get">
          <button id="husButton" type="submit" title="hus"></button>
        </form>

          <form action="/charts" method="get">
            <button id="chartButton" type="submit" title="charts"></button>
          </form>

          <form action="/map" method="get">
            <button id="mapButton" type="submit" title="map"></button>
          </form>
        </div>
    </header>
    <h3>Motionsspår</h3>
    <form action="/postPos" method="post" id="tt">
      <button id = "locBut" onclick="getLoc()">SEND</button>
      <input type="text" id ="latVal" hidden="true" name="latitude"/>
      <input type="text" id ="longVal" hidden="true" name="longitude"/>
    </form>

    <script type="text/javascript">
    async function getLoc() {
      if(!navigator.geolocation) {
        console.log("Not supported")
        alert("Geolocation is not supported by your browser")
      } else {
        navigator.geolocation.getCurrentPosition(await showPos, error)
        console.log("Hej")
      }
    }

    function error() {
      alert("Unable to retreive your location")
    }

    async function showPos(position) {
      console.log("HÄR NU")
      var c = document.getElementById('latVal')
      var d = document.getElementById('longVal')
      console.log("KOMMER HIT")
      c.setAttribute("value", position.coords.latitude)
      d.setAttribute("value", position.coords.longitude)
      submitForm()
    }

    function submitForm(){
      var d = document.getElementById('tt').submit(function(e) {
        e.preventDefault();
      })
    }

    </script>

    {{#if viewData}}
      <p>latitude: {{viewData.lat}}</p>
      <p>longitude: {{viewData.long}}</p>
    {{/if}}

    <p id="userInfo"></p>
  </body>
<div class="footer">
  <p>© Copyright 2022, Emil Dalin-Volsing, Enida Ahmic and Viktor Stranne Last updated on 13 Mar 2022.</p>
</div>
  
</html>
