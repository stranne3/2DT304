<!DOCTYPE html>
<html lang="en">

<head>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
  <meta charset="utf-8" name="viewport" content="width=device-width">
  <title>Crowding in exercise tracks</title>
  <link type="text/css" href="css/index.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body>
  <div class="sidenav" style="width:70px">
    <a href="/" class="w3-bar-item w3-button"><i class="fa fa-home fa-2x "></i></a>
    <a href="/charts" class="w3-bar-item w3-button"><i class="fa fa-bar-chart fa-2x"></i></a>
    <a href="/map" class="w3-bar-item w3-button"><i class="fa fa-location-arrow fa-2x"></i></a>
    <a href="/about" class="w3-bar-item w3-button"><i class="fa fa-info-circle fa-2x"></i></a>
  </div>
  <h1>
    Exercise tracks in Teleborg
  </h1>
  <p>When pressing this button there will be three different options about how the data should be presented.<br></p>
  <div class="dropdown">
    <button class="dropbtn">Select timespan</button>
    <div class="dropdown-content">
      <a href="#" onclick="graphData([1,2,3,4],[5,6,7,8])">Last day</a>
      <a href="#" onclick="graphData([2,4],[4,8])">Last week</a>
      <a href="#" onclick="graphData()">Last month</a>
    </div>
  </div>
  <canvas id="myChart"> </canvas>
  <script>

    const fs = require("fs");
    fs.readFile("./data.json", "utf8", (err, jsonString) => {
      if (err) {
        console.log("File read failed:", err);
        return;
      }
      console.log("File data:", jsonString);
    });

    getData();

    async function getData() {
      const response = await fetch('firebaseData.csv');
      const data = await response.text();

      const rows = data.split('\n').slice(1);
      rows.forEach(elt => {
        const row = elt.split(',');
        const time = row[0];
        const pax = row[1];
        console.log(time, pax);
      })
    }
    const ylabels = [];
    function graphData(y, x) {
      console.log("Klickat")
      // Our labels along the x-axis
      new Chart(document.getElementById("myChart"), {
        type: 'line',
        data: {
          labels: ylabels,
          datasets: [
            {
              data: x,
              label: "Hej"
            }
          ]
        },
        options: {
          responsive: false
        }
      });
    }

    ylabels.push()
  </script>

</body>
<div class="footer">
  Â© Copyright 2022, Emil Dalin-Volsing, Enida Ahmic and Viktor Stranne Last updated on 21 Mar 2022.
</div>

</html>