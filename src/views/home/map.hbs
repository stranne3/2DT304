<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" name="viewport" content="width=device-width">
    <title>Crowding in exercise tracks</title>
    <link type="text/css" href="css/styles.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  </head>
  <style type="text/css">
      /* Set the size of the div element that contains the map */
      #map {
        height: 400px;
        /* The height is 400 pixels */
        width: 100%;
        /* The width is the width of the web page */
      }
    </style>
  <body>

     <div class="sidenav" style="width:70px">
    <a href="/" class="w3-bar-item w3-button"><i class="fa fa-home fa-2x "></i></a>
    <a href="/charts" class="w3-bar-item w3-button"><i class="fa fa-bar-chart fa-2x"></i></a>
    <a href="/map" class="w3-bar-item w3-button"><i class="fa fa-location-arrow fa-2x"></i></a>
    <a href="/about" class="w3-bar-item w3-button"><i class="fa fa-info-circle fa-2x"></i></a>
  </div>
  <form action="/getMap" method="post" id="getMap">
    <button id="showMap" type="submit">Get map</button>
  </form>

    <div id="map"></div>
    
    <script type="text/javascript">
      function initMap() {
        const uluru = { lat: 56.8623104, lng: 14.8340736 };
        map = new google.maps.Map(document.getElementById("map"), {
          zoom: 15,
          center: uluru,
          marker : uluru
        });

        console.log(map)
        add()
        //mar = new google.maps.Marker({
        //  map:map
        //});
      }

      function add(data) {
        console.log(map)
      }
    </script>
    <script>
      
    </script>

    {{#if viewData}}
      <textarea hidden="true" id="source" onchange="add({{viewData.res}})"></textarea>
    {{/if}}
    <script>
      var hiddenElement = document.getElementById('source')
      if(hiddenElement !== null){
        var event = new Event('change')
        hiddenElement.dispatchEvent(event)
        console.log("CHANGED")
      }
    </script>


  </body>
  
  <div class="footer">
    <p>Â© Copyright 2022, Emil Dalin-Volsing, Enida Ahmic and Viktor Stranne Last updated on 21 Mar 2022.</p>
  </div>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCDAsYZSff2DcSKB4OMcAqtxlK7B9ONhZw&callback=initMap&libraries=&v=weekly"
      async></script>
</html>
